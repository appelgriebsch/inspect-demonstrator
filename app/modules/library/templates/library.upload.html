<div layout-fill layout="column" ng-init="ctl.initialize()">

  <md-list flex>
  	<md-list-item class="upload-preview md-whiteframe-z1" layout="row" layout-margin ng-repeat="file in ctl.files">
      <div ng-if="file.status === 'ready'" class="md-item-text" layout-fill layout="column" layout-padding>
        <div layout="row" layout-fill>
          <h4 class="filename">{{ file.name }}</h4>
          <span flex></span>
          <md-icon ng-if="file.info.type === 'folder'">folder</md-icon>
          <md-icon ng-if="file.info.type === 'file'">insert_drive_file</md-icon>
        </div>
        <span>{{ file.info.noOfFiles }} file(s) with {{ file.info.display_size.number }} {{ file.info.display_size.unit }}</span>
        <span flex></span>
        <md-progress-linear md-mode="determinate" value="{{ file.uploadProgress }}"></md-progress-linear>
      </div>
      <div ng-if="file.status === 'unknown'" class="md-item-text" layout-fill layout="column" layout-padding>
        <div layout="row" layout-fill>
          <h4 class="filename">{{ file.name }}</h4>
        </div>
        <md-progress-circular md-mode='indeterminate' md-diameter='20px'></md-progress-circular>
      </div>
      <div ng-if="file.status === 'uploaded'" class="md-item-text" layout-fill layout="column" layout-padding>
        <div layout="row" layout-fill>
          <h4 class="filename">{{ file.name }}</h4>
        </div>
        <md-icon>check</md-icon>
      </div>
    </md-list-item>
    <md-list-item class="upload-preview" layout="row" layout-margin>
      <md-menu>
        <md-button class="md-icon-button" ng-click="$mdOpenMenu($event)">
          <md-icon md-menu-origin>add_circle_outline</md-icon>
        </md-button>
        <md-menu-content width="4">
          <md-menu-item>
            <md-button ng-click="ctl.selectFile()">
              <md-icon md-menu-align-target>insert_drive_file</md-icon>
              Add File
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ng-click="ctl.selectFolder()">
              <md-icon md-menu-align-target>folder</md-icon>
              Add Folder
            </md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>
    </md-list-item>
  </md-list>

  <md-whiteframe id="dropZone" layout layout-align="center center">
    <span>
      <input type="file" id="fileSelector" class="hidden"></input>
      <input type="file" id="folderSelector" class="hidden" webkitdirectory="" directory=""></input>
    <span>
        Drop your files and/or folders here...
    </span>
  </md-whiteframe>

</div>
